<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <style>
    body { font-family: DejaVu Sans, Arial, sans-serif; background: #f8fafc; color: #1e293b; }
    .pdf-title { color: #2563eb; font-size: 2rem; text-align: center; margin-bottom: 1.5rem; font-family: 'DejaVu Sans', Arial, sans-serif; }
    .student-block { margin-bottom: 2.5rem; page-break-inside: avoid; }
    .student-header { color: #2563eb; font-size: 1.5rem; font-weight: bold; margin-bottom: 0.7rem; background: #e0e7ff; border-radius: 8px; padding: 10px 18px; }
    .log-block { border-left: 4px solid #2563eb; background: #f1f5f9; padding: 1rem 1.2rem; border-radius: 8px; margin-bottom: 18px; }
    .log-header { color: #2563eb; font-weight: bold; margin-bottom: 6px; } 
    .log-date { color: #1e293b; font-size: 1.01rem; font-weight: 600; }
    .log-overview { color: #334155; font-style: italic; margin-bottom: 6px; }
    .log-text { white-space: pre-line; margin-bottom: 6px; }
    .log-file { margin-bottom: 6px; }
    .log-status { font-size: 1rem; font-weight: bold; }
    .approved { color: green; }
    .pending { color: orange; }
    .log-remark { color: #2563eb; font-size: 1rem; }
    
    /* Print styles */
    @media print {
        body { background: white !important; }
        .log-block { border: 1px solid #2563eb; }
        .student-header { background: #e0e7ff !important; }
    }
    
    /* Print button */
    .print-button {
        position: fixed;
        top: 10px;
        right: 10px;
        background: #2563eb;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
        z-index: 1000;
    }
    .print-button:hover { background: #1d4ed8; }
    @media print { .print-button { display: none; } }
    </style>
    <script>
        function printPage() {
            window.print();
        }
    </script>
</head>
<body>
    <button class="print-button" onclick="printPage()">üñ®Ô∏è Print/Save as PDF</button>
    <div class="pdf-title">Student Log</div>
    <div class="student-block">
        <div class="student-header">
            {{ user.get_full_name|default:user.email }} ({{ user.matric_number }})<br>
            {% if supervisor %}
                <span style="font-size:1rem;color:#1e293b;font-weight:400;">Supervisor: 
                    <span style="color:#2563eb;font-weight:600;">{% if supervisor.title %}{{ supervisor.title }} {% endif %}{{ supervisor.get_full_name|default:supervisor.email }}</span>
                </span>
            {% endif %}
        </div>
        {% for log in submissions %}
        <div class="log-block">
            <div class="log-header">Date: <span class="log-date">{{ log.date|date:'l, Y-m-d H:i' }}</span></div>
            {% if log.overview %}<div class="log-overview"><span style="color: #1d4ed8;font-weight: bold;">Overview: </span>{{ log.overview }}</div>{% endif %}
            <div class="log-text"><span style="color: #1d4ed8;font-weight: bold;">Text: </span>  {{ log.text }}</div>
            {% if log.file_url %}<div class="log-file"><span style="color: #1d4ed8;font-weight: bold;">File: </span><a href="{{ log.file_url }}">Download File</a></div>{% endif %}
            <div class="log-status">Status: {% if log.approved %}<span class="approved">Approved</span>{% else %}<span class="pending">Pending</span>{% endif %}</div>
            {% if log.remark %}<div class="log-remark"><span style="color: #1d4ed8;font-weight: bold;">Remark: </span>{{ log.remark }}</div>{% endif %}
        </div>
        {% endfor %}
    </div>
</body>
</html>
